!function(e){if(e.hasOwnProperty("expr")){var t=function(t){return t.is(":checkbox")&&t.parents("form:first,html:first").find("[name="+t[0].name+"]").length>1?t.parents("form:first,html:first").find("[name="+t[0].name+"]:checked").map(function(){return e(this).val()}):t.is(":checkbox,:radio")?t.filter(":checked").val():"val"in t?t.val():"text"in t?t.text():""},s=function(s,r,n,a){return a||(a=!1),"undefined"==typeof r[3]?a:n&&(n=t(e(n)),void 0===n)?a:r[3]&&e(r[3]).length?s(t(e(r[3])),n):r[3]?s(r[3],n):a};e.expr[":"]["in-list"]=function(t,r,n){return s(function(t,s){if(s.constructor===Array||s.constructor===e)return t.constructor!==Array&&t.constructor!==e&&(t=t.split(",")),e.grep(s,function(e){return-1!==t.indexOf(e)}).length>0;var r=t.constructor===Array?t:t.split(",");return-1!==e.inArray(s,r)},n,t)},e.expr[":"]["not-in-list"]=function(t,r,n){return s(function(t,s){return s.constructor===Array||s.constructor===e?(t.constructor!==Array&&t.constructor!==e&&(t=t.split(",")),e.grep(s,function(e){return-1===t.indexOf(e)}).length>0):(t=t.constructor===Array?t:t.split(","),-1===e.inArray(s,t))},n,t)},e.expr[":"]["has-value"]=function(t,r,n){return s(function(t,s){return s.constructor===Array||s.constructor===e?(t.constructor!==Array&&t.constructor!==e&&(t=t.split(",")),e.grep(s,function(e){return-1!==t.indexOf(e)}).length==t.length):e.trim(""+s)==e.trim(""+t)},n,t)},e.expr[":"]["is-equal-to"]=e.expr[":"]["has-value"],e.expr[":"]["not-value"]=function(t,r,n){return s(function(t,s){return s.constructor===Array||s.constructor===e?(t.constructor!==Array&&t.constructor!==e&&(t=t.split(",")),e.grep(s,function(e){return-1!==t.indexOf(e)}).length!=t.length):e.trim(""+s)!=e.trim(""+t)},n,t)},e.expr[":"]["is-not-equal-to"]=e.expr[":"]["has-value"],e.expr[":"]["less-than"]=function(t,r,n){return s(function(t,s){return e.trim(""+s)<t},n,t)},e.expr[":"]["less-than-or-equal-to"]=function(t,r,n){return s(function(t,s){return e.trim(""+s)<=t},n,t)},e.expr[":"]["greater-than"]=function(t,r,n){return s(function(t,s){return e.trim(""+s)>t},n,t)},e.expr[":"]["greater-than-or-equal-to"]=function(t,r,n){return s(function(t,s){return e.trim(""+s)>=t},n,t)},e.expr[":"]["starts-with"]=function(r,n,a){return s(function(s){return 0===e.trim(""+t(e(r))).indexOf(s)},a)},e.expr[":"]["ends-with"]=function(r,n,a){return s(function(s){var n=e.trim(""+t(e(r)));return-1!==n.indexOf(s,n.length-s.length)},a)},e.expr[":"].between=function(r,n,a){return s(function(s){var o=s.split("-");if("undefined"==typeof o[1])return e.expr[":"]["has-value"](r,n,a);var i=e.trim(""+t(e(r)));return i>=o[0]&&i<=o[1]},a)},e.expr[":"]["selected-at-least"]=function(e,t,r){return s(function(e,t){return t.length>=e},r,e)},e.expr[":"]["selected-less-than"]=function(e,t,r){return s(function(e,t){return t.length<=e},r,e)},e.expr[":"].hasOwnProperty("blank")||(e.expr[":"].blank=function(s){var r=t(e(s));return r.constructor===Array||r.constructor===e?r.length<1:!e.trim(""+r)}),e.expr[":"].hasOwnProperty("filled")||(e.expr[":"].filled=function(s){var r=t(e(s));return r.constructor===Array||r.constructor===e?r.length>0:!!e.trim(""+r)}),e.expr[":"].hasOwnProperty("unchecked")||(e.expr[":"].unchecked=function(t){return!e(t).prop("checked")}),e.expr[":"].hasOwnProperty("valid")||(e.expr[":"].valid=function(t){if(!e||!e().parsley)return!0;var s=e(t).data("Parsley");return s?s.isValid():!0}),e.expr[":"].hasOwnProperty("invalid")||(e.expr[":"].invalid=function(t){if(!e||!e().parsley)return!1;var s=e(t).data("Parsley");return s?!s.isValid():!1})}}(window.jQuery||window.Zepto||window.Sprint||{});var mwm=window.mwm||{};mwm.forms=function(e,t){var s=e.forms||{},r=e.alerts||null,n=t("html,body"),a=t(document),o={queue:!1,classes:{applied:"form_applied",processing:"processing",loading:"loading",loadingRedirect:"loading-redirect",ajaxSubmit:"ajax-submit",noAjaxSubmit:"avoid-ajax-submit",invalid:"invalid",valid:"valid",progressSuccess:"progress-bar-success",progressDanger:"progress-bar-danger"},selectors:{ignored:'.ignored, [data-toggle="modal"], .btn-close, button.close',forms:"form",buttons:"button,[type=submit],a.btn",dropdowns:"select:not(.select2-drop,.chzn-done)",fields:"form :input",passwordMeasures:".password-measure",helpBlocks:".help-block.required, .help-block.validation"},validator:{errorClass:"has-error",successClass:"has-success",errorsWrapper:'<ul class="message-list"></ul>',classHandler:function(e){return e.$element.parents(".form-group").first()},errorsContainer:function(e){return e.$element.parents(".controls").first()}}};return o.selectors.ignoredAndApplied="."+o.classes.applied+", "+o.selectors.ignored,s.submit=s.submit||{},s.submit.submitting=!1,s.watch=s.watch||{},s.apply=s.apply||{},s.handlers=s.handlers||{},s.configure=function(e){o=t.extend(!0,{},o,e)},s.submit.normally=function(e){var n=t(e),a=n.attr("action"),o=s.clicked(n),i="";return n.off("submit.normally.forms.mwm"),s.load(n,o),o&&o.length&&(i=o[0].name,t("<input />").attr("type","hidden").attr("name",i).attr("value",o[0].value).appendTo(n)),n.trigger("submits.normally.forms.mwm",[a,i]),r&&r.button(o,function(){n.trigger("submitting.normally.forms.mwm",[a,i]),e.submit()},function(){s.reset(n)})?(n.trigger("submitting.normally.forms.mwm",[a,i]),e.submit(),!0):r?!1:!0},s.submit.ajax=function(a){var i=t(a),l=e.ajaxify?e.ajaxify(i.attr("action")):i.attr("action"),c=s.clicked(i),d=i.serializeArray(),u="";if(c&&c.length){if(c.first().hasClass(o.classes.noAjaxSubmit))return void s.normally(a);u=c[0].name,d.push({name:u,value:c[0].value})}if(s.load(i,c),i.trigger("submits.ajax.forms.mwm",[l,u]),o.overrides&&o.overrides.ajax)return void o.overrides.ajax.call(s,i,l,u);var m=void 0!==i.data("queue")?i.data("queue"):o.queue,f=t(i.data("targetModal")),p=a.id?t("#"+a.id+"-Alert"):[],h={error:!1};i.data("alertContainer")&&(p=t(i.data("alertContainer"))),f.length&&(h.$modal=f),p.length&&(h.$alert=p),h.$form=i;var g=function(){i.trigger("submitting.ajax.forms.mwm",[l,u]),s.submit.submitting=!0;var a=e.hasOwnProperty("getOpenModals")?e.getOpenModals():[];return t.ajax({type:"POST",queue:m,url:l,data:t.param(d),dataType:"json",success:function(e,c,d){var m=d.getResponseHeader("content-type")||"";if(m.indexOf("html")>-1)return o.overrides&&o.overrides.formReplacement?o.overrides.formReplacement.call(s,i,e,c,d):i.replaceWith(e),i.trigger("mwm::refreshed",[e,c,d]),t.event.trigger("refresh.mwm",[i,e,c,d]),!0;!c||"fail"!=c&&"error"!=c||(h.error=!0);var p=e.data?e.data:e;p.redirect||(p.redirect=i.data("onComplete")),r&&r.message(t.extend({},h,p)),p.redirect||p.reload||p.disabled?s.disable(i):s.reset(i,p.persistent),i.data("closeAfter")&&f.length?setTimeout(function(){f.modal("hide")},1e3*i.data("closeAfter")):p.closeAfter&&a.length&&setTimeout(function(){a.each(function(){t(this).on("hidden.forms.mwm",function(){t(this).off("hidden.forms.mwm")}).modal("hide")})},1e3*p.closeAfter),p.reload&&(n.addClass(o.classes.loading+" "+o.classes.loadingRedirect),location.reload()),i.find(o.selectors.helpBlocks).empty(),i.trigger("successful.ajax.forms.mwm",[l,u,p,{response:e,status:c,xhr:d}])},error:function(e){var n={},a=!1;if(e&&e.responseText){if(e.getResponseHeader("content-type").indexOf("json")>=0){try{n=JSON.parse(e.responseText),n.hasOwnProperty("resetForm")&&(a=n.resetForm)}catch(o){n={message:e.responseText}}n.redirect||(n.redirect=i.data("onError"))}else e&&(n={message:e.responseText});h.success=!0,r&&r.message(t.extend({},h,n))}else r&&r.message({message:"Error. Please try again."});i.trigger("error.ajax.forms.mwm",[l,u,n,{response:response,status:status,xhr:e}]),a&&s.reset(i)},complete:function(e,t){s.submit.done(i),i.trigger("submitted.ajax.forms.mwm",[l,u,{status:t,xhr:e}])}}),!1};r&&r.button(c,g,function(){forms.reset(i)})?g():r||g()},s.submit.done=function(e){e.removeClass(o.classes.processing),this.submitting=!1},s.watch.submissions=function(){a.off("submit.forms.watch.submissions.mwm").on("submit.forms.watch.submissions.mwm",o.selectors.forms,function(e){var r=t(this),n=r.hasClass(o.classes.ajaxSubmit)?s.submit.ajax(this):s.submit.normally(this);n||(e.preventDefault(),s.submit.submitting||s.reset(r),s.watch.submissions())})},s.watch.resetFieldsOnInvalid=function(){a.off("invalid.fields.watch.forms.mwm").on("invalid.fields.watch.forms.mwm",o.selectors.fields,function(e){var r=t(this).parents(o.selectors.forms).first();r.length&&s.reset(r)})},s.watch.setButtonClicked=function(){a.off("click.buttons.watch.forms.mwm touchstart.buttons.watch.forms.mwm").on("click.buttons.watch.forms.mwm touchstart.buttons.watch.forms.mwm",o.selectors.buttons,function(e){t(this).data("clicked",t(e.target))})},s.apply.buttons=function(e){if(t().button){var s;s=e?t(o.selectors.buttons,e):t(o.selectors.buttons,o.selectors.forms),s.not(o.selectors.ignoredAndApplied).button().addClass(o.classes.applied)}},s.apply.chosen=function(){t().chosen&&t(o.selectors.dropdowns,o.selectors.forms).not(o.selectors.ignoredAndApplied).each(function(){if(o.overrides&&o.overrides.applyChosen)return o.overrides.applyChosen.call(this,s),!0;var e=t(this),r=t.extend({disable_search_threshold:10},e.data()),n=e.children().filter(function(){return!this.value||0===t.trim(this.value).length});n.length&&(e.data("placeholder")||e.data("placeholder",n.text()),r.allow_single_deselect=!0,n.empty()),e.chosen(r).addClass(forms.applied)})},s.apply.select2=function(){t().select2&&t(o.selectors.dropdowns,o.selectors.forms).not(o.selectors.ignoredAndApplied).select2().addClass(o.classes.applied)},s.apply.labels=function(){t().flyLabels&&t(o.selectors.forms).not(o.selectors.ignoredAndApplied).addClass(o.classes.applied).flyLabels()},s.apply.validation=function(){if(t().parsley){var e=t(o.selectors.forms).not(o.selectors.ignoredAndApplied).addClass(o.classes.applied);e.length&&e.parsley(o.validator)}},s.apply.passwords=function(){t().complexify&&t(o.selectors.passwordMeasures).not(o.selectors.ignoredAndApplied).addClass(o.classes.applied).each(function(){var e=t(this),s=t("#"+this.id+"-Guide"),r=e.data("rulePassword");e.data("passwordMeasurer")&&(s=t(e.data("passwordMeasurer")));var n=s.find(".progress-bar");e.off("reset.passwords.forms.mwm").on("reset.passwords.forms.mwm",function(){t(this).keyup()}).complexify(t.extend({},{strengthScaleFactor:.3},r),function(a,o){var i=t(this).val();a&&r&&r.mustHaveDigit&&(a=/\d/.test(i)),a&&r&&r.mustHaveLowercase&&(a=/[a-z]/.test(i)),a&&r&&r.mustHaveUppercase&&(a=/[A-Z]/.test(i)),a?(s.removeClass(r.classes.invalid).addClass(r.classes.valid),n.removeClass(r.classes.progressDanger).addClass(r.classes.progressSuccess)):(s.removeClass(r.classes.valid).addClass(r.classes.invalid),n.removeClass(r.classes.progressSuccess).addClass(r.classes.progressDanger)),n.width(o+"%"),e.trigger("mwm::password-check",[a,o,{options:r,$guide:s,$bar:n}])})})},s.clicked=function(e){var s=e.find(o.selectors.buttons),r=null;return s.length&&(s.each(function(){return t(this).data("clicked")?(r=t(this),!1):void 0}),r||(r=s.filter(".btn-defaulted").first()),r&&r.length||(r=s.first())),r},s.load=function(e,r){r||(r=s.clicked(e)),e.addClass(o.classes.processing),r?(t().button&&r.hasClass(o.classes.applied)?r.button("loading"):r.addClass(o.classes.loading),e.find(o.selectors.buttons).each(function(){this!==r[0]&&t(this).addClass(o.classes.loading)})):(t().button&&e.find(o.selectors.buttons).filter("."+o.classes.applied).not(o.selectors.ignored).button("loading"),e.find(o.selectors.buttons).not(o.selectors.ignoredAndApplied).addClass(o.classes.loading))},s.reset=function(e,s){e.removeClass(o.classes.processing),s||e[0].reset(),t().button&&e.find(o.selectors.buttons).filter("."+o.classes.applied).not(o.selectors.ignored).button("reset"),e.find(o.selectors.buttons).not(o.selectors.ignoredAndApplied).removeClass(o.classes.loading),e.find(o.selectors.buttons).each(function(){this.disabled=!1;var e=t(this);e.data("clicked",null),e.data("tooltip")&&e.tooltip("hide")})},s.disable=function(e){e.find(o.selectors.buttons).each(function(){t(this).is(o.selectors.ignored)||(this.disabled=!0)})},s.enable=function(e){e.find(o.selectors.buttons).each(function(){t(this).is(o.selectors.ignored)||(this.disabled=!1)})},s.ready=function(){this.apply.buttons(),this.apply.chosen(),this.apply.labels(),this.apply.validation(),this.apply.passwords()},s.init=function(){this.watch.submissions(),this.watch.resetFieldsOnInvalid(),this.watch.setButtonClicked()},s.hasOwnProperty("manual")&&s.hasOwnProperty("manual")||(s.init(),a.ready(function(){s.ready()})),s}(window.mwm||{},window.jQuery||window.Zepto||window.Sprint);var mwm=window.mwm||{};mwm.conditionals=function(e,t){var s=e.conditionals||{},r={selector:"[data-hide-if],[data-show-if]",toggleClass:"hide",animated:"filled"};return s.configure=function(e){r=t.extend(!0,{},r,e)},s.ready=function(){t(r.selector).each(function(){var e=t(this),s=e.data("hideIf"),n=void 0===s?[]:s.split(","),a=e.data("showIf"),o=void 0===a?[]:a.split(","),i=[];t.each(n,function(s,n){var a=n.split(":"),o=a[0],l=t(o),c=a[1];return l.length?(-1===t.inArray(o,i)&&(l.off("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm"),i.push(o)),l.off("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm").on("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm",function(){var s=t(this);s.is(":"+c)?(e.addClass(e.data("hideClass")?e.data("hideClass"):r.toggleClass),e.removeClass(r.animated),e.trigger("hidden.conditionals.mwm",[s,c])):(e.removeClass(e.data("hideClass")?e.data("hideClass"):r.toggleClass),e.addClass(r.animated),e.trigger("shown.conditionals.mwm",[s,c]))}).trigger("change"),!0):!0}),t.each(o,function(s,n){var a=n.split(":"),o=a[0],l=t(o),c=a[1];return l.length?(-1===t.inArray(o,i)&&(l.off("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm"),i.push(o)),l.off("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm").on("keyup.conditionals.watch.forms.mwm change.conditionals.watch.forms.mwm",function(){var s=t(this);s.is(":"+c)?(e.removeClass(e.data("hideClass")?e.data("hideClass"):r.toggleClass),e.addClass(r.animated),e.trigger("shown.conditionals.mwm",[s,c])):(e.addClass(e.data("hideClass")?e.data("hideClass"):r.toggleClass),e.removeClass(r.animated),e.trigger("hidden.conditionals.watch.forms.mwm",[s,c]))}).trigger("change"),!0):!0})})},s.hasOwnProperty("manual")&&s.hasOwnProperty("manual")||t(document).ready(function(){s.ready()}),s}(window.mwm||{},window.jQuery||window.Zepto||window.Sprint);